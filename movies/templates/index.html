{% extends "base.html" %}
{% load static %}

{% block content %}

<style>
/* Fondo tipo Netflix y letras visibles */
body {
    background-color: #141414;
    color: #fff;
}

/* Tarjetas verticales */
.card {
    background-color: #1f1f1f;
    border: none;
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.3s, box-shadow 0.3s;
    color: #fff;
    display: flex;
    flex-direction: column;
}

.card:hover {
    transform: scale(1.05);
    box-shadow: 0 10px 20px rgba(0,0,0,0.7);
}

.card-img-top {
    width: 100%;
    height: 300px; /* alto vertical más adecuado */
    object-fit: cover;
}

/* Botones */
.btn-success, .btn-primary, .btn-warning, .btn-danger {
    font-weight: bold;
}

/* Ajuste de títulos y textos */
h3 {
    color: #e50914;
    margin-top: 20px;
    margin-bottom: 15px;
}

.card-title {
    color: #fff;
    font-size: 1rem;
    margin-bottom: 5px;
}

.card-text {
    color: #ccc;
    font-size: 0.85rem;
}

/* Contenedores de row para spacing */
.row {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
}

/* Columnas responsive */
.col-12.col-sm-6.col-md-4.col-lg-3 {
    display: flex;
}
</style>

<h3>Lista de Películas</h3>
{% if user.is_authenticated %}
<a href="{% url 'movies:add_pelicula' %}" class="btn btn-success mb-3">
    <i class="fa-solid fa-plus"></i> Añadir Película
</a>
{% endif %}

<div class="row">
    {% for pelicula in peliculas %}
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100 shadow-sm">
            {% if pelicula.picture %}
                <img src="{{ pelicula.picture.url }}" class="card-img-top" alt="{{ pelicula.titulo }}">
            {% else %}
                <img src="{% static 'images/placeholder.png' %}" class="card-img-top" alt="No Image">
            {% endif %}
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ pelicula.titulo|capfirst }}</h5>
                <p class="card-text">Género: {{ pelicula.genero|capfirst }}</p>
                <div class="mt-auto d-flex flex-wrap gap-1">
                    <a href="{% url 'movies:pelicula' pelicula.id %}" class="btn btn-primary btn-sm">
                        <i class="fa-solid fa-eye"></i> Ver
                    </a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'movies:edit_pelicula' pelicula.id %}" class="btn btn-warning btn-sm">
                        <i class="fa-solid fa-pen-to-square"></i> Editar
                    </a>
                    <a href="{% url 'movies:delete_pelicula' pelicula.id %}" class="btn btn-danger btn-sm">
                        <i class="fa-solid fa-trash"></i> Eliminar
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<hr>

<h3>Lista de Directores</h3>
{% if user.is_authenticated %}
<a href="{% url 'movies:add_director' %}" class="btn btn-success mb-3">
    <i class="fa-solid fa-plus"></i> Añadir Director
</a>
{% endif %}

<div class="row">
    {% for director in directores %}
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100 shadow-sm">
            {% if director.picture %}
                <img src="{{ director.picture.url }}" class="card-img-top" alt="{{ director.nombre }}">
            {% else %}
                <img src="{% static 'images/placeholder.png' %}" class="card-img-top" alt="No Image">
            {% endif %}
            <div class="card-body d-flex flex-column">
                <h5 class="card-title">{{ director.nombre|capfirst }}</h5>
                <p class="card-text">Nacionalidad: {{ director.nacionalidad|capfirst }}</p>
                <div class="mt-auto d-flex flex-wrap gap-1">
                    <a href="{% url 'movies:director' director.id %}" class="btn btn-primary btn-sm">
                        <i class="fa-solid fa-eye"></i> Ver
                    </a>
                    {% if user.is_authenticated %}
                    <a href="{% url 'movies:edit_director' director.id %}" class="btn btn-warning btn-sm">
                        <i class="fa-solid fa-pen-to-square"></i> Editar
                    </a>
                    <a href="{% url 'movies:delete_director' director.id %}" class="btn btn-danger btn-sm">
                        <i class="fa-solid fa-trash"></i> Eliminar
                    </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock content %}
